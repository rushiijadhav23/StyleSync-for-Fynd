(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>m});var n={};e.r(n),e.d(n,{Component:()=>i,settings:()=>u});const a=require("fs");var r=e.n(a);const s={product:"gONOQ",productCard:"dPLAA",productName:"p1x2t",productImage:"ZzT3G",container:"aQaT4",title1:"Rx6tQ",title2:"FlHuo",chatbotContainer:"OnTJR",messageArea:"gPYBQ",botMessage:"lUfzJ",userMessage:"PugIW",chatForm:"tSKPx",chatInput:"wSDZY",sendButton:"NwuwF"};function o({onQuery:e}){const[t,n]=(0,a.useState)("");return r().createElement("div",{className:s.chatbotContainer},r().createElement("div",{className:s.messageArea}),r().createElement("form",{onSubmit:async a=>{a.preventDefault(),t.trim()&&(await e(t),n(""))},className:s.chatForm},r().createElement("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:s.chatInput,placeholder:"Ask something like 'suggest me outfits for goa'"}),r().createElement("button",{type:"submit",className:s.sendButton},"Send")))}function l({product:e}){const t=e.price?.effective?.min,n=e.price?.effective?.max,a=e.price?.effective?.currency_symbol||"â‚¹",o=n&&t&&n>t?Math.round((n-t)/n*100):null;return console.log("Rendering product card:",e),r().createElement("div",{className:s.productCard},e.media?.[0]?.url&&r().createElement("img",{src:e.media[0].url,alt:e.media[0].alt||e.name,className:s.productImage}),r().createElement("h3",{className:s.productName},e.name),r().createElement("div",{className:s.priceSection},r().createElement("span",{className:s.price},a,t),o&&r().createElement(r().Fragment,null,r().createElement("span",{className:s.originalPrice},a,n),r().createElement("span",{className:s.discount},"-",o,"%"))))}const c="query products($first: Int, $pageNo: Int, $enableFilter: Boolean, $pageType: String) {\n  products(first: $first, pageNo: $pageNo, enableFilter: $enableFilter, pageType: $pageType) {\n    items {\n      price {\n        effective {\n          currency_code\n          currency_symbol\n          max\n          min\n        }\n      }\n      media {\n        alt\n        type\n        url\n      }\n      slug\n      name\n      uid\n      embeddings\n      brand {\n        name\n        uid\n      }\n      categories {\n        name\n        uid\n      }\n    }\n  }\n}";function i({title:e="Extension Title Default"}){const t=(0,a.useFPI)(),n=(0,a.useGlobalStore)(t.getters.PRODUCTS),i=n?.items??[],[u,m]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[g,f]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{i.length||(async()=>{let e=[],n=1,a=!0;for(;a;){const r={enableFilter:!0,first:50,pageNo:n,pageType:"number"};try{const s=await t.executeGQL(c,r),o=s?.products?.items||[];e=[...e,...o],o.length<50?a=!1:n++}catch(e){console.error("Failed to fetch products:",e),a=!1}}m(e),t.custom.setValue(t.getters.PRODUCTS,{items:e})})()}),[i.length]),r().createElement("div",null,r().createElement(a.Helmet,null,r().createElement("title",null,e)),r().createElement("h1",{className:s.title1},"Chat with FashionBot"),r().createElement(o,{onQuery:async e=>{await(async e=>{const t={company_id:10368,query:e},n={"Content-Type":"application/json"};try{const e=await fetch("https://asia-south1.workflow.boltic.app/89b7e111-c0bc-4e2e-b4bd-40e973146f94/chat",{method:"POST",headers:n,body:JSON.stringify(t)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();console.log("Response:",a),p(a.recommended_products)}catch(e){console.error("Request failed:",e)}finally{f(!0)}})(e)}}),g&&r().createElement("h2",{className:s.title2},d.length>0?"Suggested Products":"No suggested products available."),r().createElement("div",{className:s.container},d.length>0?u.filter((e=>d.includes(e.slug))).map((e=>r().createElement(l,{key:e.slug,product:e}))):null))}i.serverFetch=({fpi:e})=>(e.custom.setValue("test-extension",!0),e.executeGQL(c,{enableFilter:!0,first:12,pageNo:1,pageType:"number"}));const u={label:"Product List",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:"Extension Title",info:"Set the page title for the product list."}],blocks:[]},m={"product-list":{...n}};exports.sections=t})();