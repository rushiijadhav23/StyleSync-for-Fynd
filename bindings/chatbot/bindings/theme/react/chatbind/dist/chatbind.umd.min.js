!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("helmetModule"),require("sharedUtilsLibrary")):"function"==typeof define&&define.amd?define("extension",["React","helmetModule","sharedUtilsLibrary"],t):"object"==typeof exports?exports.extension=t(require("React"),require("helmetModule"),require("sharedUtilsLibrary")):e.extension=t(e.React,e.helmetModule,e.sharedUtilsLibrary)}("undefined"!=typeof self?self:this,((e,t,n)=>(()=>{"use strict";var r={173:e=>{e.exports=n},333:e=>{e.exports=t},883:t=>{t.exports=e}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};o.r(s),o.d(s,{default:()=>b});var l={};o.r(l),o.d(l,{Component:()=>y,settings:()=>h});var c=o(883),i=o.n(c),u=o(173),m=o(333);const d={product:"gONOQ",productCard:"dPLAA",productName:"p1x2t",productImage:"ZzT3G",container:"aQaT4",title1:"Rx6tQ",title2:"FlHuo",chatbotContainer:"OnTJR",messageArea:"gPYBQ",botMessage:"lUfzJ",userMessage:"PugIW",chatForm:"tSKPx",chatInput:"wSDZY",sendButton:"NwuwF"};function p({onQuery:e}){const[t,n]=(0,c.useState)("");return i().createElement("div",{className:d.chatbotContainer},i().createElement("div",{className:d.messageArea}),i().createElement("form",{onSubmit:async r=>{r.preventDefault(),t.trim()&&(await e(t),n(""))},className:d.chatForm},i().createElement("input",{type:"text",value:t,onChange:e=>n(e.target.value),className:d.chatInput,placeholder:"Ask something like 'suggest me outfits for goa'"}),i().createElement("button",{type:"submit",className:d.sendButton},"Send")))}function f({product:e}){const t=e.price?.effective?.min,n=e.price?.effective?.max,r=e.price?.effective?.currency_symbol||"â‚¹",a=n&&t&&n>t?Math.round((n-t)/n*100):null;return console.log("Rendering product card:",e),i().createElement("div",{className:d.productCard},e.media?.[0]?.url&&i().createElement("img",{src:e.media[0].url,alt:e.media[0].alt||e.name,className:d.productImage}),i().createElement("h3",{className:d.productName},e.name),i().createElement("div",{className:d.priceSection},i().createElement("span",{className:d.price},r,t),a&&i().createElement(i().Fragment,null,i().createElement("span",{className:d.originalPrice},r,n),i().createElement("span",{className:d.discount},"-",a,"%"))))}const g="query products($first: Int, $pageNo: Int, $enableFilter: Boolean, $pageType: String) {\n  products(first: $first, pageNo: $pageNo, enableFilter: $enableFilter, pageType: $pageType) {\n    items {\n      price {\n        effective {\n          currency_code\n          currency_symbol\n          max\n          min\n        }\n      }\n      media {\n        alt\n        type\n        url\n      }\n      slug\n      name\n      uid\n      embeddings\n      brand {\n        name\n        uid\n      }\n      categories {\n        name\n        uid\n      }\n    }\n  }\n}";function y({title:e="Extension Title Default"}){const t=(0,u.useFPI)(),n=(0,u.useGlobalStore)(t.getters.PRODUCTS),r=n?.items??[],[a,o]=(0,c.useState)([]),[s,l]=(0,c.useState)([]),[y,h]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{r.length||(async()=>{let e=[],n=1,r=!0;for(;r;){const a={enableFilter:!0,first:50,pageNo:n,pageType:"number"};try{const o=await t.executeGQL(g,a),s=o?.products?.items||[];e=[...e,...s],s.length<50?r=!1:n++}catch(e){console.error("Failed to fetch products:",e),r=!1}}o(e),t.custom.setValue(t.getters.PRODUCTS,{items:e})})()}),[r.length]),i().createElement("div",null,i().createElement(m.Helmet,null,i().createElement("title",null,e)),i().createElement("h1",{className:d.title1},"Chat with FashionBot"),i().createElement(p,{onQuery:async e=>{await(async e=>{const t={company_id:10368,query:e},n={"Content-Type":"application/json"};try{const e=await fetch("https://asia-south1.workflow.boltic.app/89b7e111-c0bc-4e2e-b4bd-40e973146f94/chat",{method:"POST",headers:n,body:JSON.stringify(t)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();console.log("Response:",r),l(r.recommended_products)}catch(e){console.error("Request failed:",e)}finally{h(!0)}})(e)}}),y&&i().createElement("h2",{className:d.title2},s.length>0?"Suggested Products":"No suggested products available."),i().createElement("div",{className:d.container},s.length>0?a.filter((e=>s.includes(e.slug))).map((e=>i().createElement(f,{key:e.slug,product:e}))):null))}y.serverFetch=({fpi:e})=>(e.custom.setValue("test-extension",!0),e.executeGQL(g,{enableFilter:!0,first:12,pageNo:1,pageType:"number"}));const h={label:"Product List",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:"Extension Title",info:"Set the page title for the product list."}],blocks:[]},b={"product-list":{...l}};return s})()));