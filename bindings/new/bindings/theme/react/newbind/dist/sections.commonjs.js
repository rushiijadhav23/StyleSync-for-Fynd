(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>u});var n={};e.r(n),e.d(n,{Component:()=>s,settings:()=>i});const r=require("fs");var o=e.n(r);const a={productCard:"dPLAA",productImage:"ZzT3G",productName:"p1x2t",productSlug:"wBYiF",priceSection:"NqWXr",price:"q7Ot2",originalPrice:"fwdqk",discount:"XV4Fd",recommendationTitle:"i3TxS",recommendationGrid:"OG8Qe",mainProduct:"yQ0RN"};function c({product:e}){const t=e.price?.effective?.min,n=e.price?.effective?.max,r=e.price?.effective?.currency_symbol||"$",c=n&&t&&n>t?Math.round((n-t)/n*100):null;return o().createElement("div",{className:a.productCard,onClick:()=>{console.log("Clicked on:",e.name),e.slug&&(window.location.href=`/product/${e.slug}`)},style:{cursor:"pointer"}},e.media?.[0]&&o().createElement("img",{src:e.media[0].url,alt:e.media[0].alt,className:a.productImage}),o().createElement("h3",{className:a.productName},e.name),o().createElement("div",{className:a.priceSection},o().createElement("span",{className:a.price},r,t),c&&o().createElement(o().Fragment,null,o().createElement("span",{className:a.originalPrice},r,n),o().createElement("span",{className:a.discount},"-",c,"%"))))}const l="query products($first: Int, $pageNo: Int, $enableFilter: Boolean, $pageType: String) {\n  products(first: $first, pageNo: $pageNo, enableFilter: $enableFilter, pageType: $pageType) {\n    items {\n      price {\n        effective {\n          currency_code\n          currency_symbol\n          max\n          min\n        }\n      }\n      media {\n        alt\n        type\n        url\n      }\n      slug\n      name\n      description\n      tags\n    }\n  }\n}";function s({title:e="Extension Title Default"}){const t=(0,r.useFPI)(),n=(0,r.useGlobalStore)(t.getters.PRODUCTS),s=n?.items??[],[i,u]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(null);return(0,r.useEffect)((()=>{if("undefined"!=typeof window){const e=window.location.pathname.split("/product/")[1];f(e)}}),[]),(0,r.useEffect)((()=>{s.length?m(s):(async()=>{let e=[],n=1,r=!0;for(;r;){const o={enableFilter:!0,first:50,pageNo:n,pageType:"number"};try{const a=await t.executeGQL(l,o),c=a?.products?.items||[];e=[...e,...c],c.length<50?r=!1:n++}catch(e){console.error("Failed to fetch products:",e),r=!1}}return m(e),t.custom.setValue(t.getters.PRODUCTS,{items:e}),e})().then((e=>{m(e)}))}),[s.length,t]),(0,r.useEffect)((()=>{p&&d.length>0&&(async(e=d)=>{const t={company_id:10368,slug:e.find((e=>e.slug===p)).slug},n={"Content-Type":"application/json"};try{const e=await fetch("https://asia-south1.workflow.boltic.app/ca7a0558-f634-4c93-872f-4e5b63e30f10/recommendation",{method:"POST",headers:n,body:JSON.stringify(t)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json();console.log("Response:",r),u(r.recommendations)}catch(e){console.error("Request failed:",e)}})(d)}),[p,d]),d.length?o().createElement("div",null,o().createElement(r.Helmet,null,o().createElement("title",null,e)),o().createElement("h2",{className:a.recommendationTitle},"You might also like"),o().createElement("div",{className:a.recommendationGrid},d.filter((e=>i.includes(e.slug))).map((e=>o().createElement(c,{product:e,key:e.slug}))))):o().createElement("h2",null,"Loading Products...")}s.serverFetch=({fpi:e})=>(e.custom.setValue("test-extension",!0),e.executeGQL(l,{enableFilter:!0,first:50,pageNo:1,pageType:"number"}));const i={label:"Product List",name:"product-list",props:[{id:"title",label:"Page Title",type:"text",default:"Extension Title",info:"Set the page title for the product list."}],blocks:[]},u={"product-list":{...n}};exports.sections=t})();